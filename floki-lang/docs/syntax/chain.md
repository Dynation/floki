# `chain` ‚Äì –õ–∞–Ω—Ü—é–≥ –ü–æ–¥—ñ–π —É Floki

## **1Ô∏è‚É£ –û–ø–∏—Å**
–û–ø–µ—Ä–∞—Ç–æ—Ä `chain` —É Floki –¥–æ–∑–≤–æ–ª—è—î **–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –ø–æ–¥—ñ—ó**. –ö–æ–∂–Ω–∞ –ø–æ–¥—ñ—è **–æ—á—ñ–∫—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó**, —â–æ –∑–∞–±–µ–∑–ø–µ—á—É—î **—á—ñ—Ç–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**.

### **üîπ –û—Å–Ω–æ–≤–Ω—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- **–ñ–æ—Ä—Å—Ç–∫–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å** ‚Äì –ø–æ–¥—ñ—ó –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –æ–¥–Ω–∞ –∑–∞ –æ–¥–Ω–æ—é.
- **–û—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è** ‚Äì –∫–æ–∂–Ω–∞ –ø–æ–¥—ñ—è –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–∞—Å—Ç—É–ø–Ω–æ—ó.
- **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ fallback** ‚Äì –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É –¥—ñ—é —É —Ä–∞–∑—ñ –ø–æ–º–∏–ª–∫–∏.
- **–ú–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –≤ —Ü–∏–∫–ª–∞—Ö** ‚Äì –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏.
- **–†–µ–∞–∫—Ç–∏–≤–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è** ‚Äì –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –æ–±—Ä–æ–±–∫–∏ –ø–æ—Ç–æ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö —Ç–∞ –∞–¥–∞–ø—Ç–∞—Ü—ñ—ó –¥–æ —Å–µ–Ω—Å–æ—Ä–Ω–∏—Ö –∑–º—ñ–Ω.
- **–ì–Ω—É—á–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è** ‚Äì –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, —Ç–∞–π–º-–∞—É—Ç—ñ–≤, –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Å–ø—Ä–æ–± —Ç–∞ —É–º–æ–≤–Ω–æ–≥–æ —Ä–æ–∑–≥–∞–ª—É–∂–µ–Ω–Ω—è.

---

## **2Ô∏è‚É£ –°–∏–Ω—Ç–∞–∫—Å–∏—Å**

```floki
chain "–Ω–∞–∑–≤–∞_–ª–∞–Ω—Ü—é–≥–∞" {
  config: {
    timeout: <duration>
    fallback: "event_name"
    retry: {
      attempts: <number>
      delay: <duration>
    }
  }

  input: {
    events: ["event1", "event2"]
    streams: {
      stream1: sensor("name") | filter(condition)
    }
  }

  sequence: "step1" -> "step2" -> "step3"
}
```

üîπ **–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å:** `–ø–æ–¥—ñ—è_1` -> `–ø–æ–¥—ñ—è_2` -> `–ø–æ–¥—ñ—è_3`  
üîπ **–ö–æ–∂–Ω–∞ –ø–æ–¥—ñ—è –æ—á—ñ–∫—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó**  

### **üîπ –ü—Ä–∏–∫–ª–∞–¥:**
```floki
chain "stand_sequence" -> "lie_down" -> "stand_up" -> "sit_down"
```
üí° **–†–æ–±–æ—Ç –≤–∏–∫–æ–Ω–∞—î –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ:**
1. –õ—è–≥—Ç–∏ (`lie_down`)
2. –í—Å—Ç–∞—Ç–∏ (`stand_up`)
3. –°—ñ—Å—Ç–∏ (`sit_down`)

---

## **3Ô∏è‚É£ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É —Ü–∏–∫–ª–∞—Ö**

### **üîπ `repeat` + `chain`**
```floki
repeat 3 {
  chain "training" -> "sit_down" -> "stand_up"
}
```
üí° **–õ–∞–Ω—Ü—é–≥ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å—Å—è 3 —Ä–∞–∑–∏.**

### **üîπ `while` + `chain`**
```floki
while battery_level > 20 {
  chain "patrol" -> "walk" -> "scan_environment"
}
```
üí° **–†–æ–±–æ—Ç –ø–∞—Ç—Ä—É–ª—é—î, –¥–æ–∫–∏ –∑–∞—Ä—è–¥ –±—ñ–ª—å—à–µ 20%.**

---

## **4Ô∏è‚É£ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `fallback`**
`fallback` –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∑–Ω–∞—á–∏—Ç–∏ **–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É –¥—ñ—é** —É —Ä–∞–∑—ñ –Ω–µ–≤–¥–∞—á—ñ.

```floki
chain "safe_return" -> "stop" (fallback: "enter_low_power_mode") -> "return_to_base"
```

üí° **–Ø–∫—â–æ `stop` –Ω–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–∫–æ–Ω–∞—Ç–∏**, —Ä–æ–±–æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å —É **–µ–Ω–µ—Ä–≥–æ–∑–±–µ—Ä–µ–∂–Ω–∏–π —Ä–µ–∂–∏–º** –ø–µ—Ä–µ–¥ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º –Ω–∞ –±–∞–∑—É.

---

## **5Ô∏è‚É£ –ê–≤—Ç–æ–Ω–æ–º–Ω–∏–π —Ä–µ–∂–∏–º –ø—Ä–∏ –≤—Ç—Ä–∞—Ç—ñ –∑–≤'—è–∑–∫—É**
–Ø–∫—â–æ —Ä–æ–±–æ—Ç **–≤—Ç—Ä–∞—á–∞—î —Å–∏–≥–Ω–∞–ª**, –≤—ñ–Ω –º–æ–∂–µ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ –ø–µ–≤–Ω–∏–π –ª–∞–Ω—Ü—é–≥ –ø–æ–¥—ñ–π**.

```floki
event "connection_lost" when signal_strength < 10 {
  chain "safety_mode" -> "stop" -> "return_to_base" -> "send_status_report"
}
```

üí° **–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è?**
1. –†–æ–±–æ—Ç **–∑—É–ø–∏–Ω—è—î—Ç—å—Å—è** (`stop`).
2. **–ü–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –Ω–∞ –±–∞–∑—É** (`return_to_base`).
3. **–í—ñ–¥–ø—Ä–∞–≤–ª—è—î –æ—Å—Ç–∞–Ω–Ω—ñ–π –∑–≤—ñ—Ç** (`send_status_report`).

---

## **6Ô∏è‚É£ `chain` + `every ... do`: –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–µ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è –∑–≤'—è–∑–∫—É**
```floki
every 30s do {
  if signal_strength < 10 {
    chain "connection_lost_protocol" -> "send_status_report" -> "attempt_reconnect"
  }
}
```

üí° **–©–æ —Ä–æ–±–∏—Ç—å –∫–æ–¥?**
- **–ö–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥** –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ä—ñ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª—É.
- –Ø–∫—â–æ **—Å–∏–≥–Ω–∞–ª —Å–ª–∞–±–∫–∏–π**, —Ä–æ–±–æ—Ç:
  1. **–í—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–≤—ñ—Ç** (`send_status_report`).
  2. **–ü—Ä–æ–±—É—î –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∑–≤‚Äô—è–∑–æ–∫** (`attempt_reconnect`).

---

## **7Ô∏è‚É£ –†–µ–∞–∫—Ç–∏–≤–Ω–∏–π `chain`**

```floki
chain "adaptive_sequence" {
  input: {
    streams: {
      imu: sensor("imu") | filter(value > threshold)
    }
  }

  sequence: {
    "init" ->
    "process_imu" (
      from: imu
      transform: normalize
      condition: stability > 0.5
    ) ->
    "adjust_position"
  }
  
  reactive: {
    source: imu
    processing: {
      analyze_stability: window(10ms)
      decision: {
        when stability < 0.5: "recalibrate"
      }
    }
  }
}
```

üí° **–†–µ–∞–∫—Ç–∏–≤–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Å–µ–Ω—Å–æ—Ä—ñ–≤:**
- –û—Ç—Ä–∏–º—É—î –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–∏—Ö –≤—ñ–¥ `imu`
- –ù–æ—Ä–º–∞–ª—ñ–∑—É—î –∑–Ω–∞—á–µ–Ω–Ω—è
- –ó–∞–ø—É—Å–∫–∞—î `adjust_position`, —è–∫—â–æ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å > 0.5

---

## **üìå 8Ô∏è‚É£ –í–∏—Å–Ω–æ–≤–∫–∏**
‚úî `chain` –∑–∞–±–µ–∑–ø–µ—á—É—î **—á—ñ—Ç–∫—É –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–æ–¥—ñ–π**.  
‚úî `fallback` –¥–æ–∑–≤–æ–ª—è—î **–æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–º–∏–ª–∫–∏** –±–µ–∑ –∑—É–ø–∏–Ω–∫–∏ –≤—Å—ñ—î—ó –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ.  
‚úî `chain` –º–æ–∂–Ω–∞ **–ø–æ—î–¥–Ω—É–≤–∞—Ç–∏ –∑ —Ü–∏–∫–ª–∞–º–∏ (`repeat`, `while`)**.  
‚úî –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É **–∞–≤—Ç–æ–Ω–æ–º–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö** –ø–æ–∫—Ä–∞—â—É—î **—Å—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –≤—Ç—Ä–∞—Ç–∏ –∑–≤‚Äô—è–∑–∫—É**.  
‚úî **–†–µ–∞–∫—Ç–∏–≤–Ω–∏–π `chain`** –¥–æ–∑–≤–æ–ª—è—î **–∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–æ —Å–µ–Ω—Å–æ—Ä–Ω–∏—Ö –∑–º—ñ–Ω**.  
‚úî –ë–∞–π—Ç–∫–æ–¥ **–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π —Ç–∞ –∫–æ–º–ø–∞–∫—Ç–Ω–∏–π**, —â–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è **–æ–±–º–µ–∂–µ–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤**.


